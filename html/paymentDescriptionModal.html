<!DOCTYPE html>
<html>
<title>Payment Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="./../css/makepayment.css">

<body>

    <div class="w3-container">
   

        <div id="id01" class="w3-modal">
            <div class="w3-modal-content">
                <header class="w3-container w3-teal">
                    <span onclick="closeModal()"
                        class="w3-button w3-display-topright">&times;</span>
                    <!-- <h2>Modal Header</h2> -->
                </header>
                <div class="container">
                    <div class="left-div">
                        <h2>Summary: </h2>
                        <h3 id="movieTitle">Black Adam: </h3>
                        <table>
                            <tr>
                                <td>Class Ticket</td>
                                <td><lable id="lblTicketPrice">
                                    250
                                </lable>: Rs</td>
                            </tr>
                            <tr>
                                <td>No of Tickets</td>
                                <td><input type="number" id="txtNoTickets" value='1' onchange="changeTickets()" style="width: fit-content;" /></td>
                            </tr>
                            <tr>
                                <td>Conveniece</td>
                                <td><p id="taxfee">1.75</p>&nbsp Rs</td>

                            </tr>
                            <tr>
                                <td>Sub Total</td>
                                <td><lable id="lblSubTotal"> </lable>&nbsp Rs</td>
                            </tr>
                        </table>
                    </div>
                    <div class="right-div">
                        <h2>Payment</h2>
                        <form action="payment_process.php" method="post">

                            <label for="name">First Name:</label>
                            <input type="text" id="fname" name="name" required>

                            <label for="name">Last Name:</label>
                            <input type="text" id="lname" name="name" required>

                            <label for="name">Email :</label>
                            <input type="text" id="email" name="name" required>

                            <label for="name">Name on Card:</label>
                            <input type="text" id="name" name="name" required>

                            <label for="card-number">Card Number:</label>
                            <input type="text" id="card-number" name="card-number" required>

                            <label for="expiry">Expiry Date:</label>
                            <input type="text" id="expiry" name="expiry" placeholder="MM/YY" required>

                            <label for="cvv">CVV:</label>
                            <input type="password" id="cvv" name="cvv" required>

                            <label for="net-banking">Net Banking:</label>
                            <select id="net-banking" name="net-banking">
                                <option value="sbi">SBI</option>
                                <option value="hdfc">HDFC</option>
                                <option value="icici">ICICI</option>
                                <option value="others">OTHERS</option>
                            </select>

                            <input type="submit" value="Make Payment">
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        function openPaymentModal(){
            document.getElementById('id01').style.display='block';
            const urlParams = new URLSearchParams(window.location.search);
            const original_title = urlParams.get('original_title');
            document.getElementById('movieTitle').innerText=original_title;
        }
        openPaymentModal();

        function closeModal(){
            document.getElementById('id01').style.display='none';
            window.open("home.html");
        }

        function changeTickets(){
            console.log("changeTickets function started");
            let ticketsCount=document.getElementById("txtNoTickets").value;
            let taxfee=document.getElementById("taxfee").innerText;
            document.getElementById("taxfee").innerText=taxfee*ticketsCount;
            let subtotal=document.getElementById("lblSubTotal").innerText;
            document.getElementById("lblSubTotal").innerText=ticketsCount*250+taxfee*ticketsCount;
        }
        changeTickets();
    </script>
</body>

</html>